<!DOCTYPE html>
<html>

<head>
    <title>Growth Charts</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            font-family: Arial;
            background: #f4f6f8;
            text-align: center
        }

        .container {
            max-width: 500px;
            margin: auto;
            background: white;
            padding: 15px;
            border-radius: 10px
        }

        input {
            width: 90%;
            padding: 8px;
            margin: 5px
        }

        button {
            padding: 10px 20px;
            background: #0077b6;
            color: white;
            border: none;
            margin: 10px
        }

        canvas {
            background: white;
            margin-top: 30px
        }

        .result {
            font-weight: bold;
            color: #d90429;
            margin-top: 10px
        }
    </style>
</head>

<body>

    <div class="container">
        <h2>Growth Report</h2>
        <input id="age" placeholder="Age (5â€“18)">
        <input id="height" placeholder="Height (cm)">
        <input id="weight" placeholder="Weight (kg)">
        <input id="waist" placeholder="Waist (cm)">
        <button onclick="generate()">Generate Charts</button>
    </div>

    <div class="result" id="r1"></div>
    <canvas id="heightChart"></canvas>

    <div class="result" id="r2"></div>
    <canvas id="weightChart"></canvas>

    <div class="result" id="r3"></div>
    <canvas id="bmiChart"></canvas>

    <div class="result" id="r4"></div>
    <canvas id="waistChart"></canvas>

    <script>
        let charts = [];
        const ages = [5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18];
        const P = [3, 10, 25, 50, 75, 90, 97];

        /* Percentile label plugin (RIGHT SIDE) */
        const rightLabelPlugin = {
            id: 'rightLabel',
            afterDatasetsDraw(chart, args, opts) {
                const { ctx, chartArea: { right } } = chart;
                ctx.save();
                ctx.font = "bold 13px Arial";
                chart.data.datasets.forEach((ds, i) => {
                    if (!P[i]) return;
                    const meta = chart.getDatasetMeta(i);
                    const last = meta.data[meta.data.length - 1];
                    ctx.fillText(P[i], right + 8, last.y + 4);
                });
                ctx.restore();
            }
        };

        /* SAMPLE CURVES */
        const H = [[100, 105, 110, 115, 120, 125, 130, 135, 140, 145, 150, 154, 158, 160],
        [105, 110, 115, 120, 125, 130, 135, 140, 145, 150, 155, 160, 164, 166],
        [108, 114, 120, 126, 132, 138, 144, 150, 155, 160, 165, 169, 172, 174],
        [112, 118, 125, 132, 138, 145, 152, 158, 164, 169, 173, 176, 178, 179],
        [116, 122, 129, 136, 143, 150, 157, 163, 169, 174, 178, 181, 183, 184],
        [118, 125, 132, 139, 146, 153, 160, 166, 172, 177, 181, 184, 186, 187],
        [120, 128, 135, 142, 149, 156, 163, 170, 176, 181, 185, 188, 190, 191]];

        const WT = [[14, 15, 16, 17, 18, 19, 20, 22, 24, 26, 28, 30, 32, 34],
        [15, 16, 17, 18, 19, 20, 22, 24, 26, 28, 30, 32, 34, 36],
        [16, 17, 18, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39],
        [18, 19, 20, 22, 24, 26, 29, 32, 35, 38, 41, 43, 45, 47],
        [20, 21, 23, 25, 28, 31, 34, 38, 41, 44, 47, 49, 51, 53],
        [22, 24, 26, 29, 32, 36, 40, 44, 48, 52, 55, 57, 59, 61],
        [25, 27, 30, 33, 37, 42, 47, 52, 57, 61, 64, 66, 68, 70]];

        const BMI = [[13, 13.2, 13.4, 13.6, 13.8, 14, 14.2, 14.5, 15, 15.3, 15.6, 16, 16.2, 16.5],
        [14, 14.2, 14.4, 14.6, 14.8, 15, 15.2, 15.5, 16, 16.3, 16.6, 17, 17.2, 17.5],
        [15, 15.3, 15.6, 15.9, 16.2, 16.6, 17, 17.5, 18, 18.5, 19, 19.4, 19.8, 20],
        [16, 16.3, 16.7, 17.2, 17.8, 18.4, 19, 19.6, 20.2, 21, 21.6, 22, 22.5, 23],
        [17.5, 18, 18.6, 19.2, 20, 21, 22, 23, 24, 25, 26, 27, 27.5, 28],
        [19, 19.6, 20.2, 21, 22, 23.5, 25, 26.5, 28, 29, 30, 31, 31.5, 32],
        [22, 23, 24, 25, 26.5, 28, 30, 32, 34, 35, 36, 37, 37.5, 38]];

        const W = [[48, 50, 52, 54, 56, 58, 60, 62, 64, 66, 67, 68, 69, 70],
        [50, 52, 54, 56, 58, 60, 62, 64, 66, 68, 69, 70, 71, 72],
        [52, 54, 56, 58, 60, 63, 65, 67, 69, 71, 72, 73, 74, 75],
        [58, 61, 64, 67, 70, 73, 76, 79, 82, 84, 86, 87, 88, 89],
        [62, 65, 68, 71, 74, 77, 80, 83, 86, 88, 90, 91, 92, 93],
        [64, 68, 71, 74, 77, 80, 84, 87, 90, 92, 94, 95, 96, 97],
        [66, 70, 73, 76, 79, 83, 87, 90, 93, 95, 97, 98, 99, 100]];

        function drawChart(canvas, curves, val, age, label, min, max) {
            const child = ages.map(a => a === age ? val : null);
            charts.push(new Chart(canvas, {
                type: 'line',
                data: {
                    labels: ages, datasets: [
                        ...curves.map(c => ({ data: c, borderColor: "#000", borderWidth: 2, pointRadius: 0, tension: .4 })),
                        { data: child, pointRadius: 8, backgroundColor: "blue", showLine: false }
                    ]
                },
                options: {
                    layout: { padding: { right: 40 } },
                    plugins: { legend: { display: false } },
                    scales: { x: { title: { display: true, text: "Age" } }, y: { min, max, title: { display: true, text: label } } }
                },
                plugins: [rightLabelPlugin]
            }));
        }

        function generate() {
            charts.forEach(c => c.destroy());
            charts = [];
            const age = +document.getElementById("age").value;
            const height = +document.getElementById("height").value;
            const weight = +document.getElementById("weight").value;
            const waist = +document.getElementById("waist").value;
            const bmi = (weight / ((height / 100) ** 2)).toFixed(1);

            drawChart(heightChart, H, height, age, "Height (cm)", 95, 195);
            drawChart(weightChart, WT, weight, age, "Weight (kg)", 10, 80);
            drawChart(bmiChart, BMI, bmi, age, "BMI", 12, 40);
            drawChart(waistChart, W, waist, age, "Waist (cm)", 45, 110);
        }
    </script>
</body>

</html>
